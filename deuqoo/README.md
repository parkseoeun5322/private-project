# Deuqoo(2020/12/1 ~ 2021/02/28)
드라마를 좋아하는 사람들이 활동할 수 있는 온라인 익명 커뮤니티(only Web)
```
```
```
```
### 1. 초기 화면 설계
* [Kakao Oven](https://ovenapp.io/project/3AI9X293pfm4aMLmUVGdfTZVDUTwBfMt#5jRDR, "화면설계주소")
```
```
```
```
### 2. Tech stack & Open-source libraries
* Tool : Eclipse Photon (4.8)
* Spring Tool Suite4 v.4.7.1 (Spring legacy)
* DataBase : Oracle Database 11g Express Edition
```
```
```
```
### 3. 화면 구성
```
```
#### 1) 메인 화면
![메인 페이지](https://user-images.githubusercontent.com/78471888/106889693-b9990500-672b-11eb-8d5f-07460cf42447.png)
* 헤더
  * 로그인(SNS 로그인)
  * 회원가입
  * 카테고리
    * jQuery를 활용한 슬라이드 드롭다운 기능 有
    * 스크롤을 카테고리 영역 밑으로 내릴 경우 화면 상단에 고정시켜 카테고리의 접근성을 높임)
* 본문
    *  게시판 글 미리보기
        - 인기순,  추천순, 불판, 리뷰 글 목록을 미리 불러옴
        - <> 버튼을 클릭시 이전/다음 블록으로 이동
        - 상단의 회색버튼 클릭시, 인기순, 추천순은 조회수, 추천수가 높은 기준으로 정렬된 글 목록 페이지로 이동 / 불판 및 리뷰는 해당 카테고리로 이동
    *  방영중인 드라마
        - jQuery를 이용해 포스터 1개의 너비 단위로 슬라이드 효과를 구현, <> 버튼 클릭 시 이전/다음 포스터로 이동
        - **JSOUP 라이브러리**를 이용해 드라마를 검색한 페이지(네이버)를 크롤링하여 추출한 정보를 반영하였음
        - 상단의 회색버튼 클릭 시 드라마 정보 카테고리로 이동
    * 전체 검색
        - 검색 키워드 입력시 제목 및 내용에 키워드가 포함된 글 목록 페이지로 이동
* 푸터: 공지사항 게시글 미리보기 (newticker 형식)
```
```
##### 1-1) 인기순 글 목록 화면
![인기순 글목록 페이지](https://user-images.githubusercontent.com/78471888/109393067-12427300-7963-11eb-825e-bf98650b7fb2.png)
```
```
##### 1-2) 추천순 글 목록 화면
![추천순 글목록 페이지](https://user-images.githubusercontent.com/78471888/109393087-2dad7e00-7963-11eb-9f4f-c6c98c52927e.png)
```
```
##### 1-3) 전체검색 결과 화면
![전체검색 결과 페이지](https://user-images.githubusercontent.com/78471888/109393102-45850200-7963-11eb-977f-859ea89cbd81.png)
```
```
```
```
#### 2) 로그인 화면
![로그인 화면](https://user-images.githubusercontent.com/78471888/106890821-37114500-672d-11eb-832a-8943ecdbfafd.png)
![소셜 로그인 페이지](https://user-images.githubusercontent.com/78471888/106891035-848db200-672d-11eb-9c0c-5726fc33f235.png)
* 이메일, 비밀번호를 통한 로그인가능
* 로그인 후 닉네임 출력, 로그아웃, 마이페이지로 화면 전환 가능
* Naver, Kakao API를 활용하여 SNS 로그인 구현
```
```
```
```
#### 3) 회원가입 화면
![회원가입 페이지](https://user-images.githubusercontent.com/78471888/106892230-1d70fd00-672f-11eb-8f7b-13170b11a983.png)
* 회원가입 시 Spring-Security를 활용한 비밀번호 암호화 처리
* 유효성 검사를 통한 회원 가입 폼 생성
* 회원가입 완료 후, 해당 아이디(이메일)로 인증 메일 전송
* 해당 링크를 클릭(인증 토큰 DB 저장)한 후에 로그인이 가능
```
```
```
```
#### 4) 불판 관련 페이지
드라마 본방을 달리는 회원들간의 채팅이 이루어질 수 있는 페이지
```
```
#### ① 불판 목록
![불판 페이지](https://user-images.githubusercontent.com/78471888/106892522-88bacf00-672f-11eb-9768-6aaeabe55338.png)
![불판 말머리 검색 페이지](https://user-images.githubusercontent.com/78471888/106892371-5315e600-672f-11eb-9a8e-05752b0198db.png)
* 로그인 후에 채팅방 개설 가능(로그인 후에만 글쓰기 버튼이 보임)
* 한드, 미드, 영드, 일드, 중드, 기타 기준으로 게시글 분류
* 해당 게시글 클릭 시 채팅창으로 연결
* 다른 게시판과 달리 채팅방 제목만 검색 기능
* 다른 게시판과 달리 목록 페이지에서 글 수정/삭제가 
* 밀머리 검색 기능 → 말머리(드라마 이름)를 클릭하면 해당 드라마의 채팅방만 출력
* 페이징 처리
```
```
#### ② 채팅방 개설(불판 글쓰기) 페이지
![불판 글쓰기 페이지](https://user-images.githubusercontent.com/78471888/106920682-afd4c900-674e-11eb-9939-58dff1b0dc92.png)
* 다른 게시판과 달리 제목과 말머리, 드라마 분류(한드, 미드, ...)만 입력받음
```
```
#### ③ 채팅방
![불판 채팅 페이지](https://user-images.githubusercontent.com/78471888/106893551-10eda400-6731-11eb-8818-00d4f4f6e0e2.png)
* Websocket 라이브러리 + Stomp 프로토콜을 활용하여 실시간 채팅 서비스 지원
* 다대일 채팅 
```
```
```
```
#### 5) 드라마 리뷰 페이지
드라마를 감상한 회원들이 후기글을 작성할 수 있는 페이지
```
```
#### ① 드라마 리뷰 목록 페이지
* 화면 구성과 게시글 분류, 말머리 검색 기능, 페이징 처리는 불판 목록 페이지와 동일
* 게시글 제목 및 내용 검색 기능
* 게시글 클릭 시 글 상세 페이지로 연결
```
```
#### ② 리뷰 글쓰기 페이지
![리뷰 글쓰기 페이지](https://user-images.githubusercontent.com/78471888/109393382-a6f9a080-7964-11eb-91dc-f0dd298af51c.png)
* 말머리, 드라마 분류, 제목, 내용을 입력 받음
* Naver Smart Editor Tool을 삽입하여 사용자가 글 작성을 보다 편리하게 할 수 있도록 함
* 특히, 위와 같이 이미지를 업로드 하면 내용을 입력받는 textarea에서 바로 확인할 수 있게끔 함
* 사용자가 Youtube URL 혹은 NaverTV URL을 본문에 붙여넣기만 해도, 하단에 해당 동영상의 썸네일을 나타내는 태그를(iframe)을 추가하여 DB에 저장함
```
```
#### ③ 리뷰 글 상세 페이지
![글 상세 페이지](https://user-images.githubusercontent.com/78471888/109393395-be388e00-7964-11eb-91d5-ff9e2cd1008f.png)
* 상단에 해당 글 말머리, 제목, 작성일, 조회수, 추천수, 댓글수 정보 표시
* 위에서 설명한 바와 같이 이미지와 URL 하단에 동영상 썸네일이 추가된 것을 알 수 있음
* 추천 기능(+취소), 스크랩 기능(+취소) 추가
* 글 작성자는 글 수정, 삭제 가능
* 해당 글에 달린 댓글 목록 표시
```
```
#### ④ 댓글 목록
![댓글 1](https://user-images.githubusercontent.com/78471888/109393794-0b1d6400-7967-11eb-9c21-7605ba13d18d.png)
![댓글 2](https://user-images.githubusercontent.com/78471888/109393805-15d7f900-7967-11eb-8cc5-c5c3b08881c4.png)
* 댓글 작성자는 수정, 삭제 가능
* 해당 글 작성자는 W, 그외의 댓글 작성자는 익명 닉네임(순차적으로 1,2,3...)을 부여하여 댓글 작성자를 구분하도록 함
* 글 입력 때와 같이 Naver Smarteditor를 이용해 이미지 업로드를 가능하게 함
* 댓글의 "댓글" 버튼 클릭시 해당 댓글 하단에 또다른 에디터를 추가하여 대댓글 입력이 가능하게 함
* 대댓글의 "댓글" 버튼 클릭 시 해당 대댓글을 쓴 작성자의 닉네임 태그를 추가하여 사용자가 댓글 구별이 가능하도록 함
```
```
#### ⑤ 글 수정 화면
![글 수정 화면](https://user-images.githubusercontent.com/78471888/109393995-ff7e6d00-7967-11eb-888f-26324798dbd5.png)
```
```
#### ⑥ 글 삭제
해당 글 삭제 후, 해당 카테고리 글 목록 화면으로 되돌아감
```
```
```
```
#### 6) 블루레이 모집 관련 페이지
드라마 블루레이 관련 글을 작성하고 볼 수 있는 페이지
* 목록화면, 글쓰기, 상세화면, 댓글, 글 수정/삭제 기능 모두 리뷰 카테고리와 동일
```
```
```
```
#### 7) 드라마의 모든 것 관련 페이지
① 드라마 정보 : 방영중 / 방영예정 드라마 정보를 확인할 수 있는 페이지(이 페이지는 게시판 기능이 X)
② 자료게시판 : 드라마에 대한 기사, 영상과 같은 관련 자료에 대한 글을 작성할 수 있는 페이지(게시판 기능 O)
```
```
#### ① 드라마의 모든 것 - 드라마 정보 페이지
![드라마의 모든 것 페이지](https://user-images.githubusercontent.com/78471888/110294681-82bc5480-8033-11eb-9d89-211afcf0868b.png)
* JSOUP 라이브러리를 이용해 네이버에서 '드라마'라고 검색했을 때 나오는 드라마 정보(하단의 이미지 참고)를 크롤링
* 방영종료 탭만 제외하고 방영중 / 방영예정 탭만 크롤링
* ![드라마의 모든 것 크롤링](https://user-images.githubusercontent.com/78471888/110295148-1db52e80-8034-11eb-8739-b7dc46abca2c.png)
* 각 드라마의 제목 혹은 썸네을 클릭할 경우 아래의 이미지와 같이 해당 드라마를 네이버에 검색했을 때와 같은 페이지로 이동
* ![드라마의 모든 것 네이버 이동](https://user-images.githubusercontent.com/78471888/110295559-96b48600-8034-11eb-8a1b-111f4681b40e.png)
* 또 드라마의 제목 밑에 있는 방송사를 클릭할 경우, 해당 방송사의 편성표를 네이버에 검색했을 때와 같은 페이지로 이동
* JSOUP 같은 경우 크롤링할 데이터의 양이 많을 때 혹은 크롤링할 페이지의 URL 수가 많을 때는 페이지 로딩 속도가 매우 느려진다는 것을 확인할 수 있었다. 그러므로 크롤링할 양을 최소화하기 위해 HTML 코드만 크롤링하였고, CSS는 그대로 긁어와 CSS 파일을 따로 만들어 외부 스타일시트로 적용시킴. 또 script같은 경우는 크롤링한다고 해도 제대로 작동이 되지 않는 경우가 많아 크롤링하지 않고 직접 코딩하여 기능을 구현하였다.
```
```
#### ③ 드라마의 모든 것 - 자료 게시판 페이지
* 목록화면, 글쓰기, 상세화면, 댓글, 글 수정/삭제 기능 모두 리뷰, 블루레이 카테고리와 동일
```
```
```
```
#### 8) TV 속 이 상품 관련 페이지
현재 방영중인 드라마와 관련된 상품을 확인할 수 있고 상품 관련 글을 작성하고 볼 수 있는 페이지
```
```
#### ① TV 속 이 상품 목록 페이지
![TV 속 이 상품 목록 페이지png](https://user-images.githubusercontent.com/78471888/110426912-41d34700-80ea-11eb-8464-2312b078f9ed.png)
* 네이버에서 특정 드라마를 검색했을 때 나오는 'TV 속 이 상품' 탭을 각각 크롤링함(하단 이미지 참고)
* ![TV 속 이 상품 크롤링](https://user-images.githubusercontent.com/78471888/110437569-dd6bb400-80f8-11eb-8d6c-dd6b39c0156d.png)
* 위와 같이 HTML 코드만 크롤링하였고, CSS는 그대로 긁어와 CSS 파일을 따로 만들어 외부 스타일시트로 적용시킴. 또 script같은 경우 크롤링하지 않고 페이지 넘기는 기능은 직접 코딩하여 기능을 구현하였다
